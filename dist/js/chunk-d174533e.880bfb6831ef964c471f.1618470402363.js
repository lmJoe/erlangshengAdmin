(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d174533e"],{"2dcb":function(t,e,a){},"4a77":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"appSurvey"},[a("div",{staticClass:"appSurveyContainer"},[t._m(0),a("div",{staticClass:"surveyContainer"},[a("div",{staticClass:"surveyTop"},[a("h2",[t._v("数据总览")]),a("div",{staticClass:"surveyDataTop"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:3}},[a("div",{staticClass:"grid-content bg-purple surveyDatatitle"},[t._v("昨日")])]),a("el-col",{attrs:{span:4}},[a("div",{staticClass:"grid-content bg-purple surveySort"},[t._v("收入")])]),a("el-col",{attrs:{span:4}},[a("div",{staticClass:"grid-content bg-purple surveySort"},[t._v("成本")])]),a("el-col",{attrs:{span:4}},[a("div",{staticClass:"grid-content bg-purple surveySort"},[t._v("费用")])]),a("el-col",{attrs:{span:4}},[a("div",{staticClass:"grid-content bg-purple surveySort"},[t._v("利润")])])],1)],1),a("div",{staticClass:"surveyDataBottom"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:3}},[a("div",{staticClass:"grid-content bg-purple surveyDatatitle"},[t._v("昨日")])]),a("el-col",{attrs:{span:4}},[a("div",{staticClass:"grid-content bg-purple surveyDataNum"},[t._v(t._s(t.recentData.yi))])]),a("el-col",{attrs:{span:4}},[a("div",{staticClass:"grid-content bg-purple surveyDataNum"},[t._v(t._s(t.recentData.yc))])]),a("el-col",{attrs:{span:4}},[a("div",{staticClass:"grid-content bg-purple surveyDataNum"},[t._v(t._s(t.recentData.yf))])]),a("el-col",{attrs:{span:4}},[a("div",{staticClass:"grid-content bg-purple surveyDataNum"},[t._v(t._s(t.recentData.yp))])])],1),a("el-row",{staticStyle:{"margin-top":"20px"},attrs:{gutter:25}},[a("el-col",{attrs:{span:3}},[a("div",{staticClass:"grid-content bg-purple surveyDatatitle",staticStyle:{color:"#7B7B83"}},[t._v("本月数据汇总")])]),a("el-col",{attrs:{span:4}},[a("div",{staticClass:"grid-content bg-purple surveyDataNum",staticStyle:{color:"#323337 !important","font-size":"15px"}},[t._v(t._s(t.recentData.mi))])]),a("el-col",{attrs:{span:4}},[a("div",{staticClass:"grid-content bg-purple surveyDataNum",staticStyle:{color:"#323337 !important","font-size":"15px"}},[t._v(t._s(t.recentData.mc))])]),a("el-col",{attrs:{span:4}},[a("div",{staticClass:"grid-content bg-purple surveyDataNum",staticStyle:{color:"#323337 !important","font-size":"15px"}},[t._v(t._s(t.recentData.mf))])]),a("el-col",{attrs:{span:4}},[a("div",{staticClass:"grid-content bg-purple surveyDataNum",staticStyle:{color:"#323337 !important","font-size":"15px"}},[t._v(t._s(t.recentData.mp))])])],1)],1)]),a("div",{staticClass:"surveyEchart"},[a("h2",[t._v("总趋势")]),a("div",{staticClass:"surveyDate"},[a("el-date-picker",{staticClass:"surveyTime",attrs:{"value-format":"yyyy-MM-dd",type:"daterange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":t.pickerOptions},on:{change:t.changeEchartTime},model:{value:t.echartDefaultDate,callback:function(e){t.echartDefaultDate=e},expression:"echartDefaultDate"}})],1),a("div",{staticClass:"surveyEchartBox"},[a("div",{staticClass:"surveyEchartlist"}),a("div",{staticClass:"surveyEchartimg"},[a("div",{staticStyle:{height:"400px"},attrs:{id:t.IDNAME}})])])]),a("div",{staticClass:"flowDistribution"},[a("h2",[t._v("数据分布")]),a("div",{staticClass:"flowDistrBoxTop"},[a("el-date-picker",{staticClass:"surveyTime",attrs:{"value-format":"yyyy-MM-dd",type:"daterange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":t.pickerOptions},on:{change:t.changePieTime},model:{value:t.PieDefaultDate,callback:function(e){t.PieDefaultDate=e},expression:"PieDefaultDate"}})],1),a("div",{staticClass:"flowDistrBoxBottom"},[a("div",{staticClass:"pvClass"},[a("div",{staticStyle:{height:"400px"},attrs:{id:t.mediaPage}}),a("div",{staticStyle:{height:"400px"},attrs:{id:t.custPage}}),a("div",{staticStyle:{height:"400px"},attrs:{id:t.ziyuanPage}})])])]),a("div",{staticClass:"surveyDetailBox"},[a("h3",[t._v("明细数据")]),a("div",{staticClass:"DetailBoxTop"},[a("el-date-picker",{staticClass:"surveyTime",attrs:{"value-format":"yyyy-MM-dd",type:"daterange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":t.pickerOptions},on:{change:t.changeBoxTime},model:{value:t.boxDefaultDate,callback:function(e){t.boxDefaultDate=e},expression:"boxDefaultDate"}}),a("a",{staticClass:"surveyDown",on:{click:function(e){return t.exportExcel()}}},[t._v("下载数据")])],1),a("div",{staticClass:"tableBox"},[a("div",{staticClass:"DetailBoxBottom"},[a("table",{staticClass:"detailTable",staticStyle:{border:"1px solid #dedede"},attrs:{id:"tab",border:"0",cellpadding:"0",cellspacing:"0"}},[a("tr",{staticClass:"biaotou"},[a("th",{attrs:{rowspan:"2"}},[t._v("日期")]),t._l(t.headResult,(function(e){return[a("th",{staticStyle:{},attrs:{colspan:e.num}},[t._v(t._s(e.key))])]}))],2),a("tr",{staticClass:"biaotou"},[t._l(t.headResult,(function(e){return[t._l(e.value,(function(e){return[a("th",{staticStyle:{}},[t._v(t._s(e))])]}))]}))],2),t._l(t.bodyResult,(function(e){return[a("tr",{staticClass:"biaoCont"},[t._l(e,(function(e){return[a("td",{staticStyle:{}},[t._v(t._s(e))])]}))],2)]}))],2)])]),""!==t.count?a("el-pagination",{staticClass:"count",attrs:{"current-page":t.currentPage,"page-size":30,layout:"total, sizes, prev, pager, next, jumper",total:t.count},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}}):t._e()],1)])])])},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"headContainer"},[a("div",{staticClass:"pagetarge"},[a("span",{},[t._v("经营数据报表")]),a("span",{staticClass:"arget"},[a("div",{staticClass:"argetTxt"},[a("h3",[t._v("指标(总用户)：")]),a("p",[t._v("活跃用户数：当天app的启动用户数（包含所有用户）")]),a("p",[t._v("新增用户：当天app的新增用户数（30天内去重）")]),a("p",[t._v("启动次数：当天app的启动次数（包含所有用户,同一用户退出app或进入后台超过30s为一次新的启动）")]),a("p",[t._v("人均播放量：当天app的视频播放量与视频总播放人数比（包含所有用户）")]),a("p",[t._v("人均使用时长：当天app的使用时长与使用时长事件用户数比（包含所有用户）")]),a("p",[t._v("≥30分钟人数：当天app的每个用户总使用时长中大于等于30min的用户数（包含所有用户）")])]),a("div",{staticClass:"argetTxt"},[a("h3",[t._v("指标（注册用户）：")]),a("p",[t._v("活跃账户：当天app的启动用户数（仅包含注册用户）")]),a("p",[t._v("新增账户：当天app的新注册用户数")]),a("p",[t._v("启动次数：当天app的启动次数（仅包含注册用户,同一用户退出app或进入后台超过30s为一次新的启动）")]),a("p",[t._v("人均播放量：当天app的视频播放量与视频总播放人数比（仅包含注册用户）")]),a("p",[t._v("人均使用时长：当天app的使用时长与使用时长事件用户数比（仅包含注册用户）")]),a("p",[t._v("≥30分钟人数：当天app的每个用户总使用时长中大于等于30min的用户数（仅包含注册用户）")])])])]),a("div",{staticClass:"rightSelect"})])}],r=(a("99af"),a("4160"),a("c975"),a("fb6a"),a("b0c0"),a("b64b"),a("4d63"),a("ac1f"),a("25f0"),a("5319"),a("159b"),a("b1d0")),c=a("1271"),s=a("313e"),o=a.n(s),l=(a("1531"),{name:"appSurvey",data:function(){return{title:"魔盒流量",pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-6048e5),t.$emit("pick",[a,e])}},{text:"最近一个月",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-2592e6),t.$emit("pick",[a,e])}},{text:"最近三个月",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-7776e6),t.$emit("pick",[a,e])}}]},echartDefaultDate:[],PieDefaultDate:[],boxDefaultDate:[],tableData:[],recentData:[],partData:"",loading:!0,IDNAME:"echart1",custPage:"echart1_1",mediaPage:"echart2_1",ziyuanPage:"echart3_1",btnType:1,pieValueName:"",count:"",currentPage:1,pageIndex:1,fullscreenLoading:!1,pieEchartID:"pieEchart1",PieeChartname:"",downloadExcelUrl:"",headResult:[],bodyResult:[]}},created:function(){document.title=this.title},activated:function(){document.title=this.title},mounted:function(){this.bindDrawal(),this.getmoheRecentData(),this.pieCircularChart()},methods:{bindDrawal:function(){this.echartDefaultDate.push(this.common.formatDate(-7),this.common.formatDate(-1)),this.PieDefaultDate.push(this.common.formatDate(-7),this.common.formatDate(-1)),this.boxDefaultDate.push(this.common.formatDate(-7),this.common.formatDate(-1)),this.getPartData(),this.getDetails()},flowNumClick:function(){this.pieCircularChart()},pieCircularChart:function(){var t=this;Object(r["a"])({method:"get",url:c["a"].recordUrl.getBBCircleData+"?starttime="+t.PieDefaultDate[0]+"&endTime="+t.PieDefaultDate[1],data:{},headers:{"Content-Type":"application/json"}}).then((function(e){t.loading=!1;var a=e.data;console.log("流量分布",a);var i=e.data.cost,n=e.data.income,r=e.data.profit,c=[],s=[],o=[];Object.keys(n).forEach((function(t){console.log("1-----",n,t);t.slice(1,t.indexOf(","));var e={},a=new RegExp("]");e.name=t.slice(t.indexOf(",")+1).replace(a,""),e.value=n[t],e.cid=t.slice(1,t.indexOf(",")),s.push(e)})),Object.keys(i).forEach((function(t){t.slice(1,t.indexOf(","));var e={},a=new RegExp("]");e.name=t.slice(t.indexOf(",")+1).replace(a,""),e.value=i[t],e.cid=t.slice(1,t.indexOf(",")),c.push(e)})),Object.keys(r).forEach((function(t){t.slice(1,t.indexOf(","));var e={},a=new RegExp("]");e.name=t.slice(t.indexOf(",")+1).replace(a,""),e.value=r[t],e.cid=t.slice(1,t.indexOf(",")),o.push(e)})),console.log("profitArr",o),t.showpieCharet(s.sort(t.compare("value")),t.pieValueName,"收入",t.mediaPage),t.showpieCharet(c.sort(t.compare("value")),t.pieValueName,"成本",t.custPage),t.showpieCharet(o.sort(t.compare("value")),t.pieValueName,"费用",t.ziyuanPage)})).catch((function(t){console.log(t)}))},compare:function(t){return function(e,a){var i=e[t],n=a[t];return n-i}},exportExcel:function(){var t=c["a"].recordUrl.getBBexport,e="bearer "+localStorage.getItem("accessToken"),a={method:"get",url:t,fileName:"",params:"StartTime=".concat(this.boxDefaultDate[0],"&EndTime=").concat(this.boxDefaultDate[1]),thedata:e};this.common.exportMethod(a)},showpieCharet:function(t,e,a,i){var n,r=this,c=o.a.init(document.getElementById(i));c.clear(),n={title:{text:a+"分布",left:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)",transitionDuration:0},legend:{orient:"vertical",left:10,data:[]},series:[{name:e+a,type:"pie",selectedMode:"single",radius:[0,"30%"],label:{show:!0}},{name:e+a+"分布",type:"pie",radius:["40%","55%"],label:{formatter:function(t){var e=t.name,a=(t.value,Math.round(t.percent)+"%");return e.length<=9?"".concat(e,"\n").concat(a):e.length>9&&e.length<=12?"".concat(e.slice(0,9),"\n").concat(e.slice(9),"\n").concat(a):e.length>12&&e.length<=18?"".concat(e.slice(0,9),"\n").concat(e.slice(9,12),"\n").concat(e.slice(12),"\n").concat(a):e.length>18&&e.length<=24?"".concat(e.slice(0,9),"\n").concat(e.slice(9,12),"\n").concat(e.slice(12,18),"\n").concat(e.slice(18),"\n").concat(a):e.length>24&&e.length<=30?"".concat(e.slice(0,9),"\n").concat(e.slice(9,12),"\n").concat(e.slice(12,18),"\n").concat(e.slice(18,24),"\n").concat(e.slice(24),"\n").concat(a):e.length>30?"".concat(e.slice(0,9),"\n").concat(e.slice(9,12),"\n").concat(e.slice(12,18),"\n").concat(e.slice(18,24),"\n").concat(e.slice(24,30),"\n").concat(e.slice(30),"\n").concat(a):void 0},rich:{a:{color:"#999",lineHeight:22,align:"center"},b:{fontSize:15,lineHeight:20},per:{color:"#eee",backgroundColor:"#334455",padding:[2,4],borderRadius:2}}},data:t}]},c.setOption(n),c.on("click",(function(t){var e=t.data.cid,a=t.data.name;console.log("params",t),console.log("name",a),r.PieeChartname=a,r.PirEchartData(e,a);var i=[],n=[];n[0]=a,i.push(n),i=JSON.stringify(i),window.LogList.checkLog("",this.title,"数据分布饼状图弹窗",i)}))},getmoheRecentData:function(){var t=this;Object(r["a"])({method:"get",url:c["a"].recordUrl.getBBData,data:{},headers:{"Content-Type":"application/json"}}).then((function(e){t.loading=!1,t.recentData=e.data,console.log("recentData",t.recentData)})).catch((function(t){console.log(t)}))},getPartData:function(){var t=this;Object(r["a"])({method:"get",url:c["a"].recordUrl.getBBEChartData+"?starttime="+t.echartDefaultDate[0]+"&endTime="+t.echartDefaultDate[1],data:{},headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((function(e){if(t.loading=!1,0==e.code){t.partData=e.data,console.log("趋势图数据",t.partData);var a=e.data.xData,i=e.data.yiData,n=e.data.ycData,r=e.data.yfData,c=e.data.ypData;console.log("yfData",r);c=e.data.ypData;t.showechart(a,i,n,r,c,t.IDNAME,t.btnType)}})).catch((function(t){console.log(t)}))},getBBCircleEChartData:function(t,e){var a=this;Object(r["a"])({method:"get",url:c["a"].recordUrl.getBBCircleEChartData+"?starttime="+a.PieDefaultDate[0]+"&endTime="+a.PieDefaultDate[1]+"&cid="+t,data:{},headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((function(t){if(a.loading=!1,0==t.code){a.PiepartData=t.data,console.log("饼状趋势图数据",a.PiepartData);var e=t.data.xData,i=t.data.yData;a.showPieechart(e,i,a.pieEchartID)}})).catch((function(t){console.log(t)}))},PirEchartData:function(t,e){this.$alert('<div id="'.concat(this.pieEchartID,'" style="height:400px;"></div>'),e+"趋势图",{dangerouslyUseHTMLString:!0,customClass:"message-logout"}),this.getBBCircleEChartData(t,e)},getDetails:function(){var t=this;Object(r["a"])({method:"get",url:c["a"].recordUrl.getBBdetDetails+"?starttime="+t.boxDefaultDate[0]+"&endTime="+t.boxDefaultDate[1],data:{},headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((function(e){t.loading=!1,t.count=e.data.dataColCount,t.headResult=e.data.headResult,t.bodyResult=e.data.bodyResult;for(var a=e.data.headResult,i=0;i<a.length;i++){var n=a[i].value.length;a[i].num=n}})).catch((function(t){console.log(t)}))},changeEchartTime:function(){console.log(this.echartDefaultDate),this.getPartData();var t=[],e=[];e[0]=this.echartDefaultDate[0],e[1]=this.echartDefaultDate[1],t.push(e),t=JSON.stringify(t),window.LogList.checkLog("二郎神后台管理系统",this.title,"总趋势图日期选择",t)},changePieTime:function(){console.log(this.PieDefaultDate),this.pieCircularChart();var t=[],e=[];e[0]=this.PieDefaultDate[0],e[1]=this.PieDefaultDate[1],t.push(e),t=JSON.stringify(t),window.LogList.checkLog("二郎神后台管理系统",this.title,"数据分布日期选择",t)},changeBoxTime:function(){console.log(this.boxDefaultDate),this.getDetails();var t=[],e=[];e[0]=this.boxDefaultDate[0],e[1]=this.boxDefaultDate[1],t.push(e),t=JSON.stringify(t),window.LogList.checkLog("二郎神后台管理系统",this.title,"明细数据日期选择",t)},showechart:function(t,e,a,i,n,r,c){var s=o.a.init(document.getElementById(r));s.clear();var l={tooltip:{trigger:"axis"},color:["#4DD973","#F19149","#F65B57","#2589FF"],legend:{data:["收入","成本","费用","利润"]},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},toolbox:{feature:{saveAsImage:{}}},xAxis:{type:"category",boundaryGap:!1,data:t},yAxis:{type:"value",splitLine:{lineStyle:{type:"dashed"}}},series:[{name:"收入",type:"line",data:e,lineStyle:{color:"#4DD973"}},{name:"成本",type:"line",data:a,lineStyle:{color:"#F19149"}},{name:"费用",type:"line",data:i,lineStyle:{color:"#F65B57"}},{name:"利润",type:"line",data:n,lineStyle:{color:"#2589FF"}}]};s.setOption(l)},showPieechart:function(t,e,a){var i=o.a.init(document.getElementById(a));i.clear();var n={tooltip:{trigger:"axis"},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},toolbox:{feature:{saveAsImage:{}}},xAxis:{type:"category",boundaryGap:!1,data:t},yAxis:{type:"value",splitLine:{lineStyle:{type:"dashed"}}},series:[{name:this.PieeChartname,type:"line",stack:"总量",data:e,lineStyle:{color:"#2589FF"}}]};i.setOption(n)},handleSizeChange:function(t){console.log("每页 ".concat(t," 条"))},handleCurrentChange:function(t){console.log("当前页: ".concat(t)),this.pageIndex=t,this.getDetails()}}}),u=l,d=(a("7523"),a("cb1b"),a("2877")),p=Object(d["a"])(u,i,n,!1,null,"4d788394",null);e["default"]=p.exports},5319:function(t,e,a){"use strict";var i=a("d784"),n=a("825a"),r=a("7b0b"),c=a("50c4"),s=a("a691"),o=a("1d80"),l=a("8aa5"),u=a("14c3"),d=Math.max,p=Math.min,h=Math.floor,g=/\$([$&'`]|\d\d?|<[^>]*>)/g,v=/\$([$&'`]|\d\d?)/g,f=function(t){return void 0===t?t:String(t)};i("replace",2,(function(t,e,a,i){var D=i.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,m=i.REPLACE_KEEPS_$0,y=D?"$":"$0";return[function(a,i){var n=o(this),r=void 0==a?void 0:a[t];return void 0!==r?r.call(a,n,i):e.call(String(n),a,i)},function(t,i){if(!D&&m||"string"===typeof i&&-1===i.indexOf(y)){var r=a(e,t,this,i);if(r.done)return r.value}var o=n(t),h=String(this),g="function"===typeof i;g||(i=String(i));var v=o.global;if(v){var b=o.unicode;o.lastIndex=0}var x=[];while(1){var _=u(o,h);if(null===_)break;if(x.push(_),!v)break;var w=String(_[0]);""===w&&(o.lastIndex=l(h,c(o.lastIndex),b))}for(var S="",E=0,k=0;k<x.length;k++){_=x[k];for(var P=String(_[0]),T=d(p(s(_.index),h.length),0),B=[],O=1;O<_.length;O++)B.push(f(_[O]));var N=_.groups;if(g){var A=[P].concat(B,T,h);void 0!==N&&A.push(N);var R=String(i.apply(void 0,A))}else R=C(P,h,T,B,N,i);T>=E&&(S+=h.slice(E,T)+R,E=T+P.length)}return S+h.slice(E)}];function C(t,a,i,n,c,s){var o=i+t.length,l=n.length,u=v;return void 0!==c&&(c=r(c),u=g),e.call(s,u,(function(e,r){var s;switch(r.charAt(0)){case"$":return"$";case"&":return t;case"`":return a.slice(0,i);case"'":return a.slice(o);case"<":s=c[r.slice(1,-1)];break;default:var u=+r;if(0===u)return e;if(u>l){var d=h(u/10);return 0===d?e:d<=l?void 0===n[d-1]?r.charAt(1):n[d-1]+r.charAt(1):e}s=n[u-1]}return void 0===s?"":s}))}}))},7523:function(t,e,a){"use strict";var i=a("2dcb"),n=a.n(i);n.a},cb1b:function(t,e,a){"use strict";var i=a("dbef"),n=a.n(i);n.a},dbef:function(t,e,a){},fb6a:function(t,e,a){"use strict";var i=a("23e7"),n=a("861d"),r=a("e8b5"),c=a("23cb"),s=a("50c4"),o=a("fc6a"),l=a("8418"),u=a("b622"),d=a("1dde"),p=a("ae40"),h=d("slice"),g=p("slice",{ACCESSORS:!0,0:0,1:2}),v=u("species"),f=[].slice,D=Math.max;i({target:"Array",proto:!0,forced:!h||!g},{slice:function(t,e){var a,i,u,d=o(this),p=s(d.length),h=c(t,p),g=c(void 0===e?p:e,p);if(r(d)&&(a=d.constructor,"function"!=typeof a||a!==Array&&!r(a.prototype)?n(a)&&(a=a[v],null===a&&(a=void 0)):a=void 0,a===Array||void 0===a))return f.call(d,h,g);for(i=new(void 0===a?Array:a)(D(g-h,0)),u=0;h<g;h++,u++)h in d&&l(i,u,d[h]);return i.length=u,i}})}}]);
//# sourceMappingURL=chunk-d174533e.880bfb6831ef964c471f.1618470402363.js.map